<DOCTYPE! html>
  <html>
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Dashboard</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
      <link rel="preconnect" href="https://fonts.gstatic.com">
      <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100&display=swap" rel="stylesheet">
      <link href="{{ url_for('static', filename='styles/style.css') }}" rel="stylesheet" type="text/css" />
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css" integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu" crossorigin="anonymous">

      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    </head>
    <body>
      {% include 'sidenav.html' %}
      <div class="container">
        <div class="item">
          <input type="checkbox" id="arrow1">
          <label class="expand" for="arrow1"> Assign to Reviewers </label>
          <div class="panel">
            <div class="d-flex w-100 justify-content-between">
              {% if grants is not none%}
	      {% for g in grant %}
	      <div>
		<a style="display:inline-block;"href="{{ url_for('reviewer_assignment', pid=g[0]) }}">
		<h3 style="margin-right:265px;"class="mb-1">{{ g[15] }} - {{ g[1] }}</h3>
		</a>
    <button  type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">
      Assign
    </button>

    <!-- The Modal -->
    <div style="font-weight: bold;" class="modal" id="myModal">
      <div class="modal-dialog">
        <div class="modal-content">

          <!-- Modal Header -->
          <div class="modal-header">
            <h4 style="font-weight: bold;" class="modal-title">Proposals for {{ g[15] }} </h4>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
          </div>

          <!-- Modal body -->
          <div class="modal-body">
            Title: {{ g[1] }}
            <br>
            Summary: {{ g[2] }}
            <br>
            <form  action="{{ url_for('assign') }}" method="post">
              <p style="color:rgb(0,0,0); font-weight:bold;">Reviewers in the {{g[22]}} Depratment</p>
            <select style="font-weight: bold;" name="remail" class="custom-select" id="inputGroupSelect01">
              <option selected>Choose...</option>
              {% for r in reviewer %}
                {% if r[3] == g[22] %}

                <option style="font-weight: bold;"  value="{{r[0]}} {{g[14]}}">{{r[1]}} {{r[2]}}</option>

                {% endif %}
              {% endfor %}
          </select>

        <button style="font-weight: bold;" type="submit" class="btn btn-default btn-md" id="btn" value="assign">Assign</button>
        </form>
          </div>

          <!-- Modal footer -->
          <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
          </div>

        </div>
      </div>
    </div>
              </div>
              {% else %}
                <p> No grants to assign at this time</p>
              {% endfor %}
              {% endif %}
	    </div>
          </div>
        </div>

        <div class="item">
          <input type="checkbox" id="arrow2">
          <label class="expand" for="arrow2"> Pending Final Decision</label>
          <div class="panel">
            <div class="d-flex w-100 justify-content-between">
            {% if pending is not none %}
            {% for p in pending %}
            <div>
            <a href="#" class="grant-list-item">
                <h3 class="mb-1">{{ p }}</h3>
            </a>
            </div>
            {% else %}
                <p>No proposals to review at this time</p>
            {% endfor %}
            {% endif %}
            </div>
          </div>
        </div>
        <div class="item">
          <input type="checkbox" id="arrow3">
          <label class="expand" for="arrow3"> Data</label>
          <div class="panel">
            <div class="d-flex w-100 justify-content-between">
	      <p></p>
            </div>
          </div>
        </div>
      </div>


      <script>
        var exp = document.getElementsByClassName("expand");
        var i;

        for (i = 0; i < exp.length; i++) {
          exp[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var panel = this.nextElementSibling;
            if (panel.style.display === "none") {
              panel.style.display = "block";
            } else {
              panel.style.display = "none";
            }
          });
        }
      </script>
    </body>
  </html>
